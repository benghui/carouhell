</br>
</br>
</br>

<div class = "container-fluid">

		<div class = "container-fluid">
			<h2> The Best Deals </h2> </br>
			<div class = "row">
			<% @products.each do |product| %>
				<div class="card-deck">

					<div class = "col-sm-4">
						<div class="card" style="width: 23rem;">

							<!-- <img class="card-img-top" src="http://placehold.it/700x400" alt=""> -->
							<%= cl_image_tag(product.image_url, :width => 250, :height => 250, :style => 'margin-left: auto; margin-right: auto; display: block; padding-top: 10px') %>


							<div class="card-body">
								<h5 class="card-title" style ="text-align: center"><%= product.product_name %></h5>
								<h5 class="card-title" style ="text-align: center">$SGD<%= product.price %></h5>
							</div>

							<ul class="list-group list-group-flush">
								<li class="list-group-item">Seller: <%= link_to product.seller.username, user_path(product.seller_id) %></li>
							</ul>

							<div class="card-footer">
							<%= link_to 'DETAILS', user_product_path(user_id: current_user.id, id: product.id) %> <br>
							<% if product.buyer_id %>
								<h3 style="margin-top:0px; color:#FF0000 ">Item Sold</h3>
							<% elsif current_user.id == product.seller.id %>
								<button type="button" class="btn btn-primary"><%= link_to 'Edit',  edit_user_product_path(user_id: current_user.id, id: product.id), :style => 'color:#FFFFFF' %></button>
								<button type="button" class="btn btn-primary"><%= link_to 'Delete Product', user_product_path(user_id: current_user.id, id: product.id), :style => 'color:#FFFFFF' , method: :delete, data: { confirm: 'Are you sure?' } %></button>
							<% else %>
								<button type="button" class="btn btn-primary"><%= link_to 'Buy', user_product_buy_path(user_id: current_user.id, product_id: product.id), method: :patch, data: {confirm: 'Do you want to buy this product?'} %></button>
							<% end %>
							</div>
						</div></br>
					</div>

				</div>
				<%end %>
			</div>
		</div>
</div>